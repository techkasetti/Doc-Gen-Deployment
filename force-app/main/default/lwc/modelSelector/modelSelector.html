<template>
    <lightning-card title="AI Model Selector" icon-name="utility:einstein">
        <div class.bind="cardBodyClasses">
            <!-- Loading Spinner -->
            <template if:true={isLoading}>
                <div class="slds-is-relative slds-p-around_large">
                    <lightning-spinner alternative-text="Loading models..." size="medium"></lightning-spinner>
                </div>
            </template>

            <!-- Main Content -->
            <template if:false={isLoading}>
                <!-- Combobox for Model Selection -->
                <template if:true={hasModels}>
                    <lightning-combobox
                        name="modelSelector"
                        label={label}
                        value={selectedModelId}
                        placeholder="Choose an available AI model..."
                        options={modelOptions}
                        onchange={handleSelectionChange}
                        disabled={disabled}
                        required
                    ></lightning-combobox>
                </template>

                <!-- No Models Available Message -->
                <template if:false={hasModels}>
                    <div class="slds-text-align_center slds-p-around_medium">
                        <lightning-icon icon-name="utility:info" size="small"></lightning-icon>
                        <span class="slds-m-left_x-small">No AI models are currently configured or available.</span>
                    </div>
                </template>

                <!-- Error Message -->
                <template if:true={error}>
                    <div class="slds-text-color_error slds-p-around_medium">
                        <p><b>Error:</b> Could not load AI models.</p>
                        <p>{formattedError}</p>
                    </div>
                </template>
            </template>
        </div>
    </lightning-card>
</template>